# 装饰模式

## 简介

* 装饰模式也称为包装模式，它使用一种对客户端透明的方式来动态地扩展对象的功能，同时也是继承关系的一种替代方案之一；
* 动态地给一个对象增加一些额外的职责。在为对象增加额外职责方面，装饰模式替代了继承，它比子类继承父类更为灵活，它用无需定义子类的方式来给对象动态的增加职责，使用对象之间的关联关系来取代继承。
* 装饰器模式（Decorator Pattern）允许向一个现有的对象添加新的功能，同时又不改变其结构，这种模式创建了一个装饰类，用来包装原有的类，并在保持类方法签名完整性的前提下，提供了额外的功能。

## 使用场景及优缺点

* 装饰者模式是在已有功能的基础之上，动态地添加更多 功能的一种方式，这些新加的代码装饰了原有类的 核心职责或主要行为，比生成一个子类更为灵活；
* 需要透明且动态地扩展类的功能时；举个例子，你卖咖啡，有要加牛奶的，要加黑糖的，要加白糖的，还有要都加的，你可以会想我每种都创建一个类啊，可以这样很low,大量的功能类似的类拥挤，使得代码臃肿，此时，就是装饰模式大显神威的时候，你写个咖啡类，你要什么样的咖啡你可以拿着这个咖啡类的对象然后再去加东西（即装饰），让使用这个类的人要加什么随便加，不关你的事，别人可以创建类（把咖啡对象以组合而不是继承的方式加入）然后来装饰他自己需要的咖啡；很自由！
* 又比如给一个人穿衣服的例子，每个人穿的都不一样，难道每个人都写一个类吗，那岂不是好几十亿个，此时可以只创建一个人的类给出来，要穿衣服的就创建一个类（把人类的对象以组合而不是继承的方式加入）然后去装饰他要的穿着，
* 总的来说，就是需要用到你这个类，但是我还想添加一些别的有趣的东西进去，这些有趣的东西不是固定的，又不想把代码写死，所以用这个装饰模式就可以；
* 再解释一下，我怕自己以后不理解了，比如，我写一个咖啡类，就像上面写的，我有可能有时候要加牛奶，要加黑糖，要加白糖，还有要都加的，还有组合的，还有等等等等，我不可能每个都写出一个类来，那样很傻，我就只写一个纯咖啡类（什么都不加），然后我以后要加牛奶的咖啡时，先创建一个咖啡对象，然后我就创建一个类去装饰这个咖啡对象（把咖啡对象以组合而不是继承的方式加入）；

## 总结

* 装饰模式和之前学的代理模式有点类似，但是，这2种是不同的，从使用意义来说就是不同的；
* 装饰模式是以对客户端透明的方式（即不需要给扩展接口）扩展对象的功能，客户端想怎么装饰都可以，是继承关系的代替方案；而代理模式则是给一个对象提供一个代理对象，并由代理对象来控制原有对象的引用；
* 装饰模式应该为所装饰的对象增强功能；代理模式对代理的对象施加控制，但是不对对象本身的功能进行增强；